- content_for :head do
  %link{href: "https://cdn.jsdelivr.net/npm/choices.js@9.0.1/public/assets/styles/choices.min.css", rel: "stylesheet"}
%h1 Listing buildings 

= form_with url: buildings_path, method: :get, remote: true, data: { controller: "autosave", target: "autosave.form", action: "ajax:success->autosave#success ajax:error->autosave#error" } do |form|

  -# = form.select :name_or_nick_name_or_abbreviation_in, @searchable_buildings.collect{ |building| [building[0].titleize, building[1] ] }, {:prompt => 'Building Name'}, {multiple: true, data: {controller: "choices", target: "choices.choice", action: "autosubmit#change"}}
  %label.block.text-sm.font-medium.text-gray-700{for: "search-by-building-name"} 
    Search building names

    %span.text-muted{"data-autosave-target" => "status"}

  .mt-1.flex.rounded-md.shadow-sm
    .relative.flex.items-stretch.flex-grow.focus-within:z-10
      .absolute.inset-y-0.left-0.pl-3.flex.items-center.pointer-events-none
        .h-5.w-5.text-gray-400= svg("magnifying-glass")
        
      = text_field_tag :query, params[:query], class: "search-by-building-name", :placeholder => "Undergraduate Sciences Building", data: {action: "autosave#save"}


    %button.-ml-px.relative.inline-flex.items-center.space-x-2.px-4.py-2.border.border-gray-300.text-sm.font-medium.rounded-r-md.text-gray-700.bg-gray-50.hover:bg-gray-100.focus:outline-none.focus:ring-1.focus:ring-indigo-500.focus:border-indigo-500
      / Heroicon name: solid/sort-ascending
      %svg.h-5.w-5.text-gray-400{"aria-hidden" => "true", fill: "currentColor", viewbox: "0 0 20 20", xmlns: "http://www.w3.org/2000/svg"}
        %path{d: "M3 3a1 1 0 000 2h11a1 1 0 100-2H3zM3 7a1 1 0 000 2h5a1 1 0 000-2H3zM3 11a1 1 0 100 2h4a1 1 0 100-2H3zM13 16a1 1 0 102 0v-5.586l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 101.414 1.414L13 10.414V16z"}
      %span Sort
  
%table
  %thead
    %tr
      %th Bldrecnbr
      %th Latitude
      %th Longitude
      %th Name
      %th Nick name
      %th Abbreviation
      %th Address
      %th City
      %th State
      %th Zip
      %th Country
      %th
      %th
      %th

  %tbody{class: "divide-y divide-gray-500 "}
    - @buildings.each do |building|
      %tr{class: "#{cycle('row-even', 'row-odd')}"}
        %td= building.bldrecnbr
        %td= building.latitude
        %td= building.longitude
        %td= building.name
        %td= building.nick_name
        %td= building.abbreviation
        %td= building.address
        %td= building.city
        %td= building.state
        %td= building.zip
        %td= building.country
        %td= link_to 'Show', building
        %td= link_to 'Edit', edit_building_path(building)
        %td= link_to 'Destroy', building, method: :delete, data: { confirm: 'Are you sure?' }

%br

= link_to 'New Building', new_building_path

-unless @pagy.page == @pagy.count
  = pagy_nav(@pagy).html_safe